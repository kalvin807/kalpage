---
import '../styles/global.css';
import PaintingPixels from '../components/PaintingPixels.astro';

const SITE_URL = 'https://www.kalvin.io';
const PAGE_TITLE = 'Kal.L | Fullstack Engineer in Tokyo';
const PAGE_DESCRIPTION =
  'Fullstack engineer in Tokyo building AI agents, speech systems, and high-performance web apps.';
const OG_IMAGE_URL = `${SITE_URL}/og-image.png`;
const OG_IMAGE_ALT = 'Minimal icon social preview card';

const structuredData = [
  {
    '@context': 'https://schema.org',
    '@type': 'Person',
    name: 'Kalvin (Kal)',
    url: SITE_URL,
    jobTitle: 'Fullstack Engineer',
    address: {
      '@type': 'PostalAddress',
      addressLocality: 'Tokyo',
      addressCountry: 'JP',
    },
    sameAs: ['https://github.com/kalvin807'],
    knowsAbout: ['AI Agents', 'Speech Systems', 'TypeScript', 'Python', 'Go', 'Next.js'],
  },
  {
    '@context': 'https://schema.org',
    '@type': 'WebSite',
    name: 'Kal.L Portfolio',
    url: SITE_URL,
  },
];
---

<!doctype html>
<html lang="en" class="min-h-full" style="color-scheme: dark">
  <head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <meta name="viewport" content="width=device-width" />
    <title>{PAGE_TITLE}</title>
    <meta name="robots" content="index,follow,max-image-preview:large" />
    <meta name="description" content={PAGE_DESCRIPTION} />
    <meta name="keywords" content="software engineer, developer, Tokyo, Japan, portfolio, web development, programming" />
    <meta name="author" content="Kal.L" />
    <link rel="canonical" href={SITE_URL} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={SITE_URL} />
    <meta property="og:title" content={PAGE_TITLE} />
    <meta property="og:description" content={PAGE_DESCRIPTION} />
    <meta property="og:image" content={OG_IMAGE_URL} />
    <meta property="og:image:secure_url" content={OG_IMAGE_URL} />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content={OG_IMAGE_ALT} />
    <meta property="og:site_name" content="Kal.L Portfolio" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={SITE_URL} />
    <meta name="twitter:title" content={PAGE_TITLE} />
    <meta name="twitter:description" content={PAGE_DESCRIPTION} />
    <meta name="twitter:image" content={OG_IMAGE_URL} />
    <meta name="twitter:image:alt" content={OG_IMAGE_ALT} />
    <meta name="twitter:domain" content="www.kalvin.io" />

    <meta name="theme-color" content="#23211d" />
    <meta name="msapplication-TileColor" content="#23211d" />
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)}></script>
  </head>
  <body>
    <!-- Main content -->
    <main class="mx-auto max-w-6xl px-6 py-8 xl:grid xl:grid-cols-[minmax(0,1fr)_20rem] xl:gap-10">
      <div class="max-w-3xl">
        <slot />
      </div>
      <aside class="mt-10 xl:mt-0">
        <div class="border border-accent-30 bg-bg-card p-4">
          <div>
            <p class="m-0 font-mono text-[0.68rem] uppercase tracking-[0.12em] text-accent">Column Note</p>
            <h2 class="mt-3 mb-0 font-heading text-xl leading-tight text-text-heading">Daily Pixel Study</h2>
            <p class="mt-3 mb-0 text-[0.82rem] leading-relaxed text-text-muted">
              A public-domain painting from the Met, translated into pixel blocks.
            </p>
          </div>
          <div class="mt-4 border border-accent-30 bg-surface-stage p-3">
            <PaintingPixels server:defer>
              <div slot="fallback">
                <div class="painting-skeleton"></div>
                <div class="painting-info">
                  <span class="painting-pixels-loading-text">Loading a paintingâ€¦</span>
                </div>
              </div>
            </PaintingPixels>
          </div>
          <p class="m-0 border-t border-accent-10 pt-3 font-mono text-[0.68rem] uppercase tracking-[0.09em] text-text-muted">
            Updated every 6 hours
          </p>
        </div>
      </aside>
    </main>

  </body>
</html>
